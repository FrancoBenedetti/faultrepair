# Apache Virtual Host Configuration for fault-reporter.local
# Add this to your Apache sites-available directory
# Then enable with: sudo a2ensite fault-reporter.local.conf

<VirtualHost *:80>
    ServerName fault-reporter.local
    ServerAlias www.fault-reporter.local

    # Document root should point to the public directory
    DocumentRoot /home/franco/Projects/fault-reporter/public

    # Enable .htaccess overrides
    <Directory "/home/franco/Projects/fault-reporter/public">
        AllowOverride All
        Require all granted

        # CORS headers for frontend API calls
        Header set Access-Control-Allow-Origin "*"
        Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
        Header set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With"
    </Directory>

    # Alias for backend API directory
    Alias /backend /home/franco/Projects/fault-reporter/backend
    <Directory "/home/franco/Projects/fault-reporter/backend">
        AllowOverride All
        Require all granted

        # CORS headers for API endpoints
        Header set Access-Control-Allow-Origin "*"
        Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
        Header set Access-Control-Allow-Headers "Content-Type, Authorization"

        # PHP configuration
        php_value include_path ".:/home/franco/Projects/fault-reporter/backend"
    </Directory>

    # Enable PHP processing for .php files
    <FilesMatch \.php$>
        SetHandler application/x-httpd-php
    </FilesMatch>

    # Error and access logs
    ErrorLog ${APACHE_LOG_DIR}/fault-reporter_error.log
    CustomLog ${APACHE_LOG_DIR}/fault-reporter_access.log combined
</VirtualHost>
